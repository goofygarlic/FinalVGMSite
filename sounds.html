<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Jukebox</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="css/sounds.css" />
</head>
<body>
  <!-- ===== Site Navigation ===== -->
  <header class="site-nav">
    <img src="images/web-logo.svg" alt="Site Logo" class="site-logo" />
    <nav>
        <a href="home.html">Home</a>
        <a href="reviews.html">Reviews</a>
        <a href="gallery.html">Gallery</a>
        <a href="sounds.html" class="active">Jukebox</a>
        <a href="world.html">Composers</a>
        <a href="visual.html">Essay</a>
        <a href="about.html">About</a>
        </nav>
  </header>

  <!-- ===== Main Jukebox ===== -->
  <main>
    <h1>Boss Rush Jukebox</h1>
    <p>Hit <strong>Play ⇢</strong> and let random 30‑second boss‑theme highlights ambush your ears. Skip anytime!</p>

    <section id="jukebox" class="jukebox-card">
      <div class="waveform"></div>
      <h2 id="bossName">Ready?</h2>
      <div class="controls">
        <button id="playBtn" aria-label="Play"><span class="icon">▶</span></button>
        <button id="skipBtn" aria-label="Skip"><span class="icon">⤼</span></button>
      </div>
      <!-- hidden player -->
      <audio id="audioPlayer"></audio>
    </section>
  </main>

  <footer>
    <p>&copy; 2025 Garlic Design – All boss clips belong to their respective composers.</p>
  </footer>

  <!-- ===== Boss Track List & Logic ===== -->
  <script>
    const tracks = [
      { name: 'Calamitas – Stained, Brutal Calamity', file: 'audio/cal_calami.mp3' },
      { name: 'Terraria – Eye of Cthulhu', file: 'audio/eye.mp3' },
      { name: 'Hollow Knight – Hornet', file: 'audio/hornet.mp3' },
      { name: 'Undertale – Megalovania', file: 'audio/megalovania.mp3' },
      { name: 'Persona 5 – Rivers in the Desert', file: 'audio/rivers.mp3' }
    ];

    const audio = document.getElementById('audioPlayer');
    const bossName = document.getElementById('bossName');
    const playBtn = document.getElementById('playBtn');
    const skipBtn = document.getElementById('skipBtn');
    const wave = document.querySelector('.waveform');

    let current = null;
    let playing = false;

    function pickTrack() {
      current = tracks[Math.floor(Math.random() * tracks.length)];
      bossName.textContent = current.name;
      audio.src = current.file;
    }

    function togglePlay() {
      if (!playing) {
        if (!current) pickTrack();
        audio.play();
      } else {
        audio.pause();
      }
    }

    playBtn.addEventListener('click', togglePlay);
    skipBtn.addEventListener('click', () => {
      pickTrack();
      if (playing) audio.play();
    });

    audio.addEventListener('play', () => {
      playing = true;
      playBtn.innerHTML = '<span class="icon">❚❚</span>';
      wave.classList.add('animate');
    });

    audio.addEventListener('pause', () => {
      playing = false;
      playBtn.innerHTML = '<span class="icon">▶</span>';
      wave.classList.remove('animate');
    });

    audio.addEventListener('ended', () => {
      pickTrack();
      audio.play();
    });
  </script>
</body>
</html>
